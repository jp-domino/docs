"use strict";(self.webpackChunkflojoy_doc=self.webpackChunkflojoy_doc||[]).push([[8598],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=a,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||r;return n?o.createElement(f,i(i({ref:t},c),{},{components:n})):o.createElement(f,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<r;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},14491:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var o=n(87462),a=(n(67294),n(3905));const r={sidebar_position:3,id:"manifest",title:"Node Manifest"},i=void 0,l={unversionedId:"custom-nodes/manifest",id:"custom-nodes/manifest",title:"Node Manifest",description:"Before we begin creating a custom node, we need to first recognize how Flojoy recognizes custom nodes, as well as how to integrate them into an application.",source:"@site/docs/custom-nodes/manifest.md",sourceDirName:"custom-nodes",slug:"/custom-nodes/manifest",permalink:"/custom-nodes/manifest",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,id:"manifest",title:"Node Manifest"},sidebar:"main",previous:{title:"Data Container",permalink:"/custom-nodes/data-container"},next:{title:"Creating a custom node",permalink:"/custom-nodes/creating-custom-node"}},s={},p=[{value:"Flojoy decorator",id:"flojoy-decorator",level:3},{value:"Node Inputs",id:"node-inputs",level:3},{value:"The Manifest",id:"the-manifest",level:3},{value:"Updating Flojoy Databases",id:"updating-flojoy-databases",level:3}],c={toc:p};function d(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Before we begin creating a custom node, we need to first recognize how Flojoy recognizes custom nodes, as well as how to integrate them into an application."),(0,a.kt)("h3",{id:"flojoy-decorator"},"Flojoy decorator"),(0,a.kt)("p",null,"All node functions in Flojoy require a ",(0,a.kt)("a",{parentName:"p",href:"https://peps.python.org/pep-0318/"},"decorator")," provided by Flojoy's python package. To begin writting a custom node, in your Python file, add the boilerplate ..."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"from flojoy import flojoy, DataContainer\n")),(0,a.kt)("p",null,"... and to your custom function, add the decorator:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"@flojoy\ndef my_custom_function(dc, params):\n    .\n    .\n    .\n    return DataContainer( ... )\n")),(0,a.kt)("h3",{id:"node-inputs"},"Node Inputs"),(0,a.kt)("p",null,"Note that the example function above takes two (2) arguments."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"dc")," : a list of inputs provided to the node instance. They are ordered in the same order as the nodes are attached to the input. Remember that these are objects of type ",(0,a.kt)("inlineCode",{parentName:"p"},"DataContainer"),", so you can access their data via their attributes, such as ",(0,a.kt)("inlineCode",{parentName:"p"},"dc[0].y")," etc.")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"params")," : this is a new level of node customization that requires us to know more about how Flojoy recognizes what to do with custom nodes."))),(0,a.kt)("h3",{id:"the-manifest"},"The Manifest"),(0,a.kt)("p",null,"In the source directory ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/flojoy-io/nodes/tree/main/MANIFEST"},(0,a.kt)("inlineCode",{parentName:"a"},"PYTHON/nodes/MANIFEST")),", each node has a file of extension ",(0,a.kt)("inlineCode",{parentName:"p"},"manifest.yaml"),", a YAML file that provides certain metadata of the node to Flojoy. The YAML structure must consist of a ",(0,a.kt)("inlineCode",{parentName:"p"},"COMMAND")," key with a dictionary attribute. The dictionary must itself have the following keys:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"name")," : This is the name of the node as it will be rendered in the UI of Flojoy")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"key")," : This is a unique identifier for the node that will allow for reference within the source of Flojoy")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"type")," : This is the identifier of the node into its resepctive parent category. These keys (and their respective sections) can be found in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/flojoy-io/studio/blob/main/src/feature/flow_chart_panel/manifest/COMMANDS_MANIFEST.ts"},(0,a.kt)("inlineCode",{parentName:"a"},"/src/feature/flow_chart_panel/manifest/COMMANDS_MANIFEST.ts")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"p"},"parameters")," : This is a dictionary of parameters that can be tweaked in the UI to control the behaviour of a particular instance of this node. For example, an instance of the Proportion-Interal-Derivative (PID) controller node has its time constants set as below in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/flojoy-io/nodes/blob/main/MANIFEST/pid.manifest.yaml"},(0,a.kt)("inlineCode",{parentName:"a"},"PYTHON/nodes/MANIFEST/pid.manifest.yaml")),":"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"COMMAND:\n  - name: PID\n    key: PID\n    type: SIGNAL_PROCESSING\n    parameters:\n      Kp:\n        type: float\n        default: 5\n      Ki:\n        type: float\n        default: 0.0143\n      Kd:\n        type: float\n        default: 356.25\n")),(0,a.kt)("p",null,"It is these parameters that can be accessed via the ",(0,a.kt)("inlineCode",{parentName:"p"},"params")," argument in your Flojoy function!"),(0,a.kt)("h3",{id:"updating-flojoy-databases"},"Updating Flojoy Databases"),(0,a.kt)("p",null,"After creating your new manifest function, we need to update the databases Flojoy refers to for information on the nodes, as well as their actual functionality. To do this, simply run the following in the root directory of Flojoy."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"python3 write_python_metadata.py\n")))}d.isMDXComponent=!0}}]);